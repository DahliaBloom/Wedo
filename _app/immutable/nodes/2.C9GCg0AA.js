import{s as ne,e as p,t as O,c as g,b as E,d as R,f,p as u,i as F,h as i,j as W,n as z,k as Pe,a as I,g as T,O as le,P as _e,A as Ae,Q as Be,R as Se,S as se,l as we}from"../chunks/scheduler.BcFcbi1P.js";import{S as re,i as oe,a as M,g as Ee,c as De,t as P,b as ve,d as be,m as ke,e as $e}from"../chunks/index.YWzw4S9O.js";import{c as K}from"../chunks/stores.1TYuwSXv.js";function ae(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Ne(s){let e,n,a=s[0].user.name+"",t,c;return{c(){e=p("div"),n=O("Hallo "),t=O(a),c=O(" ðŸ«¶"),this.h()},l(l){e=g(l,"DIV",{class:!0});var r=E(e);n=R(r,"Hallo "),t=R(r,a),c=R(r," ðŸ«¶"),r.forEach(f),this.h()},h(){u(e,"class","w-full rounded-full align-middle text-center p-1 bg-gradient-to-r from-primary to-[#CBDDD9]")},m(l,r){F(l,e,r),i(e,n),i(e,t),i(e,c)},p(l,[r]){r&1&&a!==(a=l[0].user.name+"")&&W(t,a)},i:z,o:z,d(l){l&&f(e)}}}function je(s,e,n){let a;return Pe(s,K,t=>n(0,a=t)),[a]}class Fe extends re{constructor(e){super(),oe(this,e,je,Ne,ne,{})}}function Ue(s){let e,n=s[0].title+"",a,t,c,l,r=s[0].author+"",o,_,$,H,d,x,U;return{c(){e=p("div"),a=O(n),t=I(),c=p("div"),l=p("div"),o=O(r),_=I(),$=p("i"),H=I(),d=p("input"),this.h()},l(D){e=g(D,"DIV",{class:!0});var k=E(e);a=R(k,n),t=T(k),c=g(k,"DIV",{class:!0});var y=E(c);l=g(y,"DIV",{class:!0});var V=E(l);o=R(V,r),_=T(V),$=g(V,"I",{class:!0}),E($).forEach(f),V.forEach(f),H=T(y),d=g(y,"INPUT",{type:!0,class:!0}),y.forEach(f),k.forEach(f),this.h()},h(){u($,"class","fa-solid fa-user"),le($,"text-gray-400",s[0].done),u(l,"class","badge badge-primary flex items-center gap-2"),u(d,"type","checkbox"),u(d,"class","checkbox checkbox-xs checkbox-primary"),u(c,"class","flex items-center gap-2"),u(e,"class","flex justify-between items-center"),le(e,"font-thin",s[0].done)},m(D,k){F(D,e,k),i(e,a),i(e,t),i(e,c),i(c,l),i(l,o),i(l,_),i(l,$),i(c,H),i(c,d),d.checked=s[0].done,x||(U=[_e(d,"change",s[2]),_e(d,"change",s[3])],x=!0)},p(D,[k]){k&1&&n!==(n=D[0].title+"")&&W(a,n),k&1&&r!==(r=D[0].author+"")&&W(o,r),k&1&&le($,"text-gray-400",D[0].done),k&1&&(d.checked=D[0].done),k&1&&le(e,"font-thin",D[0].done)},i:z,o:z,d(D){D&&f(e),x=!1,Ae(U)}}}function Ge(s,e,n){let{task:a}=e;const t=Be();function c(){a.done=this.checked,n(0,a)}const l=()=>t("statusChange");return s.$$set=r=>{"task"in r&&n(0,a=r.task)},[a,t,c,l]}class qe extends re{constructor(e){super(),oe(this,e,Ge,Ue,ne,{task:0})}}function Ce(s,e,n){const a=s.slice();return a[4]=e[n],a[5]=e,a[6]=n,a}function He(s,e,n){const a=s.slice();return a[7]=e[n],a}function xe(s){let e,n;function a(...t){return s[2](s[4],s[5],s[6],...t)}return e=new qe({props:{task:s[7]}}),e.$on("statusChange",a),{c(){ve(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,c){ke(e,t,c),n=!0},p(t,c){s=t;const l={};c&1&&(l.task=s[7]),e.$set(l)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){$e(e,t)}}}function Le(s){let e,n,a,t,c=s[4].title+"",l,r,o,_,$,H,d,x,U,D,k,y,V,X,ie,w,C,A,Ie='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>',ce,B,ue,Q=s[4].title+"",Y,de,N,Te='<input type="text" placeholder="Task ..." class="input w-full py-4 my-3 focus:outline-none"/>',fe,S,ye="<button></button>",Z,he,L,me,Me,j=ae(s[4].tasks),v=[];for(let b=0;b<j.length;b+=1)v[b]=xe(He(s,j,b));const Oe=b=>P(v[b],1,1,()=>{v[b]=null});function Re(...b){return s[3](s[4],...b)}return{c(){e=p("div"),n=p("input"),a=I(),t=p("div"),l=O(c),r=I(),o=p("div"),_=p("progress"),H=I(),d=p("div"),x=p("div"),U=I();for(let b=0;b<v.length;b+=1)v[b].c();D=I(),k=p("div"),y=p("button"),V=p("i"),ie=I(),w=p("dialog"),C=p("div"),A=p("form"),A.innerHTML=Ie,ce=I(),B=p("h3"),ue=O("Add task to "),Y=O(Q),de=I(),N=p("form"),N.innerHTML=Te,fe=I(),S=p("form"),S.innerHTML=ye,he=I(),this.h()},l(b){e=g(b,"DIV",{class:!0});var h=E(e);n=g(h,"INPUT",{type:!0,name:!0}),a=T(h),t=g(h,"DIV",{class:!0});var m=E(t);l=R(m,c),r=T(m),o=g(m,"DIV",{class:!0});var J=E(o);_=g(J,"PROGRESS",{class:!0,max:!0}),E(_).forEach(f),J.forEach(f),m.forEach(f),H=T(h),d=g(h,"DIV",{class:!0});var G=E(d);x=g(G,"DIV",{class:!0}),E(x).forEach(f),U=T(G);for(let ge=0;ge<v.length;ge+=1)v[ge].l(G);D=T(G),k=g(G,"DIV",{class:!0});var ee=E(k);y=g(ee,"BUTTON",{class:!0,onclick:!0});var Ve=E(y);V=g(Ve,"I",{class:!0}),E(V).forEach(f),Ve.forEach(f),ie=T(ee),w=g(ee,"DIALOG",{id:!0,class:!0});var te=E(w);C=g(te,"DIV",{class:!0});var q=E(C);A=g(q,"FORM",{method:!0,"data-svelte-h":!0}),se(A)!=="svelte-1y32dtx"&&(A.innerHTML=Ie),ce=T(q),B=g(q,"H3",{class:!0});var pe=E(B);ue=R(pe,"Add task to "),Y=R(pe,Q),pe.forEach(f),de=T(q),N=g(q,"FORM",{"data-svelte-h":!0}),se(N)!=="svelte-1ovwirs"&&(N.innerHTML=Te),q.forEach(f),fe=T(te),S=g(te,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),se(S)!=="svelte-aas4ya"&&(S.innerHTML=ye),te.forEach(f),ee.forEach(f),G.forEach(f),he=T(h),h.forEach(f),this.h()},h(){u(n,"type","radio"),u(n,"name","taskGroups"),u(_,"class","progress progress-accent"),_.value=$=s[4].donePercentage,u(_,"max","100"),u(o,"class","basis-1/4 flex-shrink-0"),u(t,"class","collapse-title font-light text-xl flex gap-2 justify-between items-center pr-[1rem] truncate"),u(x,"class","divider -mt-0.5"),u(V,"class","fa-solid fa-plus"),u(y,"class","btn btn-sm btn-circle btn-primary"),u(y,"onclick",X="modal_"+s[4].title.replace(/ /g,"_")+".showModal()"),u(A,"method","dialog"),u(B,"class","font-bold text-lg"),u(C,"class","modal-box"),u(S,"method","dialog"),u(S,"class","modal-backdrop"),u(w,"id",Z="modal_"+s[4].title.replace(/ /g,"_")),u(w,"class","modal"),u(k,"class","grid place-items-center pt-1"),u(d,"class","collapse-content space-y-2"),u(e,"class","collapse bg-base-100 drop-shadow-lg")},m(b,h){F(b,e,h),i(e,n),i(e,a),i(e,t),i(t,l),i(t,r),i(t,o),i(o,_),i(e,H),i(e,d),i(d,x),i(d,U);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(d,null);i(d,D),i(d,k),i(k,y),i(y,V),i(k,ie),i(k,w),i(w,C),i(C,A),i(C,ce),i(C,B),i(B,ue),i(B,Y),i(C,de),i(C,N),i(w,fe),i(w,S),i(e,he),L=!0,me||(Me=_e(N,"submit",Re),me=!0)},p(b,h){if(s=b,(!L||h&1)&&c!==(c=s[4].title+"")&&W(l,c),(!L||h&1&&$!==($=s[4].donePercentage))&&(_.value=$),h&1){j=ae(s[4].tasks);let m;for(m=0;m<j.length;m+=1){const J=He(s,j,m);v[m]?(v[m].p(J,h),M(v[m],1)):(v[m]=xe(J),v[m].c(),M(v[m],1),v[m].m(d,D))}for(Ee(),m=j.length;m<v.length;m+=1)Oe(m);De()}(!L||h&1&&X!==(X="modal_"+s[4].title.replace(/ /g,"_")+".showModal()"))&&u(y,"onclick",X),(!L||h&1)&&Q!==(Q=s[4].title+"")&&W(Y,Q),(!L||h&1&&Z!==(Z="modal_"+s[4].title.replace(/ /g,"_")))&&u(w,"id",Z)},i(b){if(!L){for(let h=0;h<j.length;h+=1)M(v[h]);L=!0}},o(b){v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)P(v[h]);L=!1},d(b){b&&f(e),Se(v,b),me=!1,Me()}}}function ze(s){let e,n,a=ae(s[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=Le(Ce(s,a,l));const c=l=>P(t[l],1,1,()=>{t[l]=null});return{c(){e=p("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=g(l,"DIV",{class:!0});var r=E(e);for(let o=0;o<t.length;o+=1)t[o].l(r);r.forEach(f),this.h()},h(){u(e,"class","flex flex-col gap-1.5")},m(l,r){F(l,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);n=!0},p(l,[r]){if(r&3){a=ae(l[0]);let o;for(o=0;o<a.length;o+=1){const _=Ce(l,a,o);t[o]?(t[o].p(_,r),M(t[o],1)):(t[o]=Le(_),t[o].c(),M(t[o],1),t[o].m(e,null))}for(Ee(),o=a.length;o<t.length;o+=1)c(o);De()}},i(l){if(!n){for(let r=0;r<a.length;r+=1)M(t[r]);n=!0}},o(l){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)P(t[r]);n=!1},d(l){l&&f(e),Se(t,l)}}}function Qe(s,e,n){let a=[];K.subscribe(r=>{n(0,a=r.data.taskGroups)});function t(r,o){const _=o.target.children[0].value;K.update($=>(r.tasks.unshift({title:_,author:$.user.name,done:!1}),$)),o.target.parentElement.parentElement.close()}return[a,t,(r,o,_,$)=>{n(0,o[_].donePercentage=Math.round(r.tasks.filter(d=>d.done).length/r.tasks.length*100),a);const[H]=r.tasks.splice(r.tasks.findIndex(d=>d.done),1);r.tasks.push(H),K.update(d=>d)},(r,o)=>t(r,o)]}class Je extends re{constructor(e){super(),oe(this,e,Qe,ze,ne,{})}}function Ke(s){let e,n,a,t,c;return n=new Fe({}),t=new Je({}),{c(){e=p("div"),ve(n.$$.fragment),a=I(),ve(t.$$.fragment),this.h()},l(l){e=g(l,"DIV",{class:!0});var r=E(e);be(n.$$.fragment,r),a=T(r),be(t.$$.fragment,r),r.forEach(f),this.h()},h(){u(e,"class","space-y-6")},m(l,r){F(l,e,r),ke(n,e,null),i(e,a),ke(t,e,null),c=!0},i(l){c||(M(n.$$.fragment,l),M(t.$$.fragment,l),c=!0)},o(l){P(n.$$.fragment,l),P(t.$$.fragment,l),c=!1},d(l){l&&f(e),$e(n),$e(t)}}}function We(s){let e,n='<span class="loading loading-spinner loading-sm ease-linear"></span>';return{c(){e=p("div"),e.innerHTML=n,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-13rxzoy"&&(e.innerHTML=n),this.h()},h(){u(e,"class","grid place-items-center h-full")},m(a,t){F(a,e,t)},i:z,o:z,d(a){a&&f(e)}}}function Xe(s){let e,n,a,t;const c=[We,Ke],l=[];function r(o,_){return o[0].loading?0:1}return e=r(s),n=l[e]=c[e](s),{c(){n.c(),a=we()},l(o){n.l(o),a=we()},m(o,_){l[e].m(o,_),F(o,a,_),t=!0},p(o,[_]){let $=e;e=r(o),e!==$&&(Ee(),P(l[$],1,1,()=>{l[$]=null}),De(),n=l[e],n||(n=l[e]=c[e](o),n.c()),M(n,1),n.m(a.parentNode,a))},i(o){t||(M(n),t=!0)},o(o){P(n),t=!1},d(o){o&&f(a),l[e].d(o)}}}function Ye(s,e,n){let a;return Pe(s,K,t=>n(0,a=t)),[a]}class lt extends re{constructor(e){super(),oe(this,e,Ye,Xe,ne,{})}}export{lt as component};
