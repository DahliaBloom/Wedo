import{s as g,w,e as S,c as v,b as $,f as c,p as b,i as y,x as D,y as j,z as C,o as I}from"../chunks/scheduler.BcFcbi1P.js";import{S as z,i as M,a as O,t as q}from"../chunks/index.YWzw4S9O.js";import{a as A,g as p,d,b as f,c as _,o as E}from"../chunks/stores.1TYuwSXv.js";const G=!0,V=Object.freeze(Object.defineProperty({__proto__:null,prerender:G},Symbol.toStringTag,{value:"Module"}));function L(s){let e,n;const i=s[1].default,a=w(i,s,s[0],null);return{c(){e=S("div"),a&&a.c(),this.h()},l(t){e=v(t,"DIV",{class:!0});var o=$(e);a&&a.l(o),o.forEach(c),this.h()},h(){b(e,"class","p-3 h-screen")},m(t,o){y(t,e,o),a&&a.m(e,null),n=!0},p(t,[o]){a&&a.p&&(!n||o&1)&&D(a,i,t,t[0],n?C(i,t[0],o,null):j(t[0]),null)},i(t){n||(O(a,t),n=!0)},o(t){q(a,t),n=!1},d(t){t&&c(e),a&&a.d(t)}}}function P(s,e,n){let{$$slots:i={},$$scope:a}=e;return I(()=>{A.onAuthStateChanged(async t=>{const o=window.location.pathname.split("/")[1];if(!t&&o!=="login"){window.location.href="/login";return}if(!t)return;t&&o==="login"&&(window.location.href="/");const u=await p(d(f,"groupIDs",t.uid));if(!u.exists())window.location.href="/joinGroup";else{const r=d(f,"groups",u.data().id),h=await p(r);t.name=t.email.split("@")[0].replace(/^./,l=>l.toUpperCase()),_.update(l=>({...l,loading:!1,user:t,groupRef:r,data:h.data()})),E(r,l=>{_.update(m=>({...m,data:l.data()}))})}})}),s.$$set=t=>{"$$scope"in t&&n(0,a=t.$$scope)},[a,i]}class k extends z{constructor(e){super(),M(this,e,P,L,g,{})}}export{k as component,V as universal};
