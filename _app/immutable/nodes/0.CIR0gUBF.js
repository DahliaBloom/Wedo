import{s as w,D as b,e as S,c as v,b as $,f,q as y,i as D,E as j,F as C,G as I,z as q}from"../chunks/scheduler.DEuJf6Cr.js";import{S as z,i as E,a as G,t as M}from"../chunks/index.BVCW9bT3.js";import{b as O,g as d,d as p,c as _,e as m,o as A}from"../chunks/stores.D-QSYZUm.js";import{b as l}from"../chunks/paths.DWbYfkcz.js";const F=!0,k=Object.freeze(Object.defineProperty({__proto__:null,prerender:F},Symbol.toStringTag,{value:"Module"}));function L(s){let e,n;const i=s[1].default,a=b(i,s,s[0],null);return{c(){e=S("div"),a&&a.c(),this.h()},l(t){e=v(t,"DIV",{class:!0});var o=$(e);a&&a.l(o),o.forEach(f),this.h()},h(){y(e,"class","p-3 h-screen")},m(t,o){D(t,e,o),a&&a.m(e,null),n=!0},p(t,[o]){a&&a.p&&(!n||o&1)&&j(a,i,t,t[0],n?I(i,t[0],o,null):C(t[0]),null)},i(t){n||(G(a,t),n=!0)},o(t){M(a,t),n=!1},d(t){t&&f(e),a&&a.d(t)}}}function P(s,e,n){let{$$slots:i={},$$scope:a}=e;return q(()=>{O.onAuthStateChanged(async t=>{const o=window.location.pathname.slice(l.length+1);if(!t&&o!=="login"){window.location.href=l+"/login";return}if(!t)return;t&&o==="login"&&(window.location.href=l+"/");const u=await d(p(_,"groupIDs",t.uid));if(!u.exists())window.location.href=l+"/joinGroup";else{const c=p(_,"groups",u.data().id),h=await d(c);t.name=t.email.split("@")[0].replace(/^./,r=>r.toUpperCase()),m.update(r=>({...r,loading:!1,user:t,groupRef:c,data:h.data()})),A(c,r=>{m.update(g=>({...g,data:r.data()}))})}})}),s.$$set=t=>{"$$scope"in t&&n(0,a=t.$$scope)},[a,i]}class B extends z{constructor(e){super(),E(this,e,P,L,w,{})}}export{B as component,k as universal};
