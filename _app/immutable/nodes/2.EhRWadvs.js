import{s as de,e as f,t as N,c as h,b as D,d as j,f as g,p as u,i as W,h as i,j as Z,n as J,k as Be,a as I,g as y,O as oe,P as ce,A as Re,Q as qe,R as Ne,S as ie,r as Ge,l as Se,T as ze,o as Qe}from"../chunks/scheduler.Dult4g_V.js";import{S as fe,i as he,a as V,g as xe,c as we,t as H,b as $e,d as De,m as Ie,e as ye}from"../chunks/index.bZ5aG_wg.js";import{c as Y,f as re}from"../chunks/stores.PLbXrk1E.js";function ue(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Je(n){let e,a,s=n[0].user.name+"",t,c;return{c(){e=f("div"),a=N("Hallo "),t=N(s),c=N(" ðŸ«¶"),this.h()},l(l){e=h(l,"DIV",{class:!0});var o=D(e);a=j(o,"Hallo "),t=j(o,s),c=j(o," ðŸ«¶"),o.forEach(g),this.h()},h(){u(e,"class","w-full rounded-full align-middle text-center p-1 bg-gradient-to-r from-primary to-[#CBDDD9]")},m(l,o){W(l,e,o),i(e,a),i(e,t),i(e,c)},p(l,[o]){o&1&&s!==(s=l[0].user.name+"")&&Z(t,s)},i:J,o:J,d(l){l&&g(e)}}}function Ke(n,e,a){let s;return Be(n,Y,t=>a(0,s=t)),[s]}class Xe extends fe{constructor(e){super(),he(this,e,Ke,Je,de,{})}}function Ye(n){let e,a=n[0].title+"",s,t,c,l,o=n[0].author+"",r,E,d,x,p,T,S;return{c(){e=f("div"),s=N(a),t=I(),c=f("div"),l=f("div"),r=N(o),E=I(),d=f("i"),x=I(),p=f("input"),this.h()},l(k){e=h(k,"DIV",{class:!0});var $=D(e);s=j($,a),t=y($),c=h($,"DIV",{class:!0});var w=D(c);l=h(w,"DIV",{class:!0});var P=D(l);r=j(P,o),E=y(P),d=h(P,"I",{class:!0}),D(d).forEach(g),P.forEach(g),x=y(w),p=h(w,"INPUT",{type:!0,class:!0}),w.forEach(g),$.forEach(g),this.h()},h(){u(d,"class","fa-solid fa-user"),oe(d,"text-gray-400",n[0].done),u(l,"class","badge badge-primary flex items-center gap-2"),u(p,"type","checkbox"),u(p,"class","checkbox checkbox-xs checkbox-primary"),u(c,"class","flex items-center gap-2"),u(e,"class","flex justify-between items-center"),oe(e,"font-thin",n[0].done)},m(k,$){W(k,e,$),i(e,s),i(e,t),i(e,c),i(c,l),i(l,r),i(l,E),i(l,d),i(c,x),i(c,p),p.checked=n[0].done,T||(S=[ce(p,"change",n[2]),ce(p,"change",n[3])],T=!0)},p(k,[$]){$&1&&a!==(a=k[0].title+"")&&Z(s,a),$&1&&o!==(o=k[0].author+"")&&Z(r,o),$&1&&oe(d,"text-gray-400",k[0].done),$&1&&(p.checked=k[0].done),$&1&&oe(e,"font-thin",k[0].done)},i:J,o:J,d(k){k&&g(e),T=!1,Re(S)}}}function Ze(n,e,a){let{task:s}=e;const t=qe();function c(){s.done=this.checked,a(0,s)}const l=()=>t("statusChange");return n.$$set=o=>{"task"in o&&a(0,s=o.task)},[s,t,c,l]}class et extends fe{constructor(e){super(),he(this,e,Ze,Ye,de,{task:0})}}function Fe(n,e,a){const s=n.slice();return s[7]=e[a],s[8]=e,s[9]=a,s}function Oe(n,e,a){const s=n.slice();return s[10]=e[a],s}function Ue(n){let e,a;function s(...t){return n[3](n[7],n[8],n[9],...t)}return e=new et({props:{task:n[10]}}),e.$on("statusChange",s),{c(){$e(e.$$.fragment)},l(t){De(e.$$.fragment,t)},m(t,c){Ie(e,t,c),a=!0},p(t,c){n=t;const l={};c&2&&(l.task=n[10]),e.$set(l)},i(t){a||(V(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){ye(e,t)}}}function Ae(n){let e,a,s,t,c=n[7].title+"",l,o,r,E,d,x,p,T,S,k,$,w,P,ee,ge,C,L,U,Te='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>',pe,F,q,K=n[7].title+"",te,me,A,Ve="...",ve,G,B,_e,O,Pe="<button></button>",le,be,M,ke,Ce,R=ue(n[7].tasks),_=[];for(let b=0;b<R.length;b+=1)_[b]=Ue(Oe(n,R,b));const je=b=>H(_[b],1,1,()=>{_[b]=null});function We(...b){return n[6](n[7],...b)}return{c(){e=f("div"),a=f("input"),s=I(),t=f("div"),l=N(c),o=I(),r=f("div"),E=f("progress"),x=I(),p=f("div"),T=f("div"),S=I();for(let b=0;b<_.length;b+=1)_[b].c();k=I(),$=f("div"),w=f("button"),P=f("i"),ge=I(),C=f("dialog"),L=f("div"),U=f("form"),U.innerHTML=Te,pe=I(),F=f("div"),q=f("h3"),te=N(K),me=I(),A=f("h3"),A.textContent=Ve,ve=I(),G=f("form"),B=f("input"),_e=I(),O=f("form"),O.innerHTML=Pe,be=I(),this.h()},l(b){e=h(b,"DIV",{class:!0});var m=D(e);a=h(m,"INPUT",{type:!0,name:!0}),s=y(m),t=h(m,"DIV",{class:!0});var v=D(t);l=j(v,c),o=y(v),r=h(v,"DIV",{class:!0});var X=D(r);E=h(X,"PROGRESS",{class:!0,max:!0}),D(E).forEach(g),X.forEach(g),v.forEach(g),x=y(m),p=h(m,"DIV",{class:!0});var z=D(p);T=h(z,"DIV",{class:!0}),D(T).forEach(g),S=y(z);for(let Ee=0;Ee<_.length;Ee+=1)_[Ee].l(z);k=y(z),$=h(z,"DIV",{class:!0});var ne=D($);w=h(ne,"BUTTON",{class:!0,onclick:!0});var Le=D(w);P=h(Le,"I",{class:!0}),D(P).forEach(g),Le.forEach(g),ge=y(ne),C=h(ne,"DIALOG",{id:!0,class:!0});var se=D(C);L=h(se,"DIV",{class:!0});var Q=D(L);U=h(Q,"FORM",{method:!0,"data-svelte-h":!0}),ie(U)!=="svelte-1y32dtx"&&(U.innerHTML=Te),pe=y(Q),F=h(Q,"DIV",{class:!0});var ae=D(F);q=h(ae,"H3",{class:!0});var Me=D(q);te=j(Me,K),Me.forEach(g),me=y(ae),A=h(ae,"H3",{class:!0,"data-svelte-h":!0}),ie(A)!=="svelte-1srqw7j"&&(A.textContent=Ve),ae.forEach(g),ve=y(Q),G=h(Q,"FORM",{});var He=D(G);B=h(He,"INPUT",{type:!0,placeholder:!0,class:!0}),He.forEach(g),Q.forEach(g),_e=y(se),O=h(se,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ie(O)!=="svelte-aas4ya"&&(O.innerHTML=Pe),se.forEach(g),ne.forEach(g),z.forEach(g),be=y(m),m.forEach(g),this.h()},h(){u(a,"type","radio"),u(a,"name","taskGroups"),u(E,"class","progress progress-accent"),E.value=d=n[7].donePercentage,u(E,"max","100"),u(r,"class","basis-1/4 flex-shrink-0"),u(t,"class","collapse-title font-light text-xl flex gap-2 justify-between items-center pr-[1rem] truncate"),u(T,"class","divider -mt-0.5"),u(P,"class","fa-solid fa-plus"),u(w,"class","btn btn-sm btn-circle btn-primary"),u(w,"onclick",ee="modal_"+n[7].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")+".showModal()"),u(U,"method","dialog"),u(q,"class","font-bold text-lg bg-primary rounded-lg px-2"),u(A,"class","font-bold text-lg"),u(F,"class","flex items-center gap-2"),u(B,"type","text"),u(B,"placeholder","Task ..."),u(B,"class","input w-full py-4 my-3 focus:outline-none"),u(L,"class","modal-box"),u(O,"method","dialog"),u(O,"class","modal-backdrop"),u(C,"id",le="modal_"+n[7].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")),u(C,"class","modal"),u($,"class","grid place-items-center pt-1"),u(p,"class","collapse-content space-y-2"),u(e,"class","collapse bg-base-100 drop-shadow-lg")},m(b,m){W(b,e,m),i(e,a),i(e,s),i(e,t),i(t,l),i(t,o),i(t,r),i(r,E),i(e,x),i(e,p),i(p,T),i(p,S);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(p,null);i(p,k),i(p,$),i($,w),i(w,P),i($,ge),i($,C),i(C,L),i(L,U),i(L,pe),i(L,F),i(F,q),i(q,te),i(F,me),i(F,A),i(L,ve),i(L,G),i(G,B),n[5](B),i(C,_e),i(C,O),i(e,be),M=!0,ke||(Ce=[ce(w,"click",n[4]),ce(G,"submit",We)],ke=!0)},p(b,m){if(n=b,(!M||m&2)&&c!==(c=n[7].title+"")&&Z(l,c),(!M||m&2&&d!==(d=n[7].donePercentage))&&(E.value=d),m&2){R=ue(n[7].tasks);let v;for(v=0;v<R.length;v+=1){const X=Oe(n,R,v);_[v]?(_[v].p(X,m),V(_[v],1)):(_[v]=Ue(X),_[v].c(),V(_[v],1),_[v].m(p,k))}for(xe(),v=R.length;v<_.length;v+=1)je(v);we()}(!M||m&2&&ee!==(ee="modal_"+n[7].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")+".showModal()"))&&u(w,"onclick",ee),(!M||m&2)&&K!==(K=n[7].title+"")&&Z(te,K),(!M||m&2&&le!==(le="modal_"+n[7].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")))&&u(C,"id",le)},i(b){if(!M){for(let m=0;m<R.length;m+=1)V(_[m]);M=!0}},o(b){_=_.filter(Boolean);for(let m=0;m<_.length;m+=1)H(_[m]);M=!1},d(b){b&&g(e),Ne(_,b),n[5](null),ke=!1,Re(Ce)}}}function tt(n){let e,a,s=ue(n[1]),t=[];for(let l=0;l<s.length;l+=1)t[l]=Ae(Fe(n,s,l));const c=l=>H(t[l],1,1,()=>{t[l]=null});return{c(){e=f("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=h(l,"DIV",{class:!0});var o=D(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(g),this.h()},h(){u(e,"class","flex flex-col gap-1.5")},m(l,o){W(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);a=!0},p(l,[o]){if(o&7){s=ue(l[1]);let r;for(r=0;r<s.length;r+=1){const E=Fe(l,s,r);t[r]?(t[r].p(E,o),V(t[r],1)):(t[r]=Ae(E),t[r].c(),V(t[r],1),t[r].m(e,null))}for(xe(),r=s.length;r<t.length;r+=1)c(r);we()}},i(l){if(!a){for(let o=0;o<s.length;o+=1)V(t[o]);a=!0}},o(l){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)H(t[o]);a=!1},d(l){l&&g(e),Ne(t,l)}}}function lt(n,e,a){let s,t=[];Y.subscribe(d=>{a(1,t=d.data.taskGroups)});function c(d,x){const p=x.target.children[0].value;Y.update(T=>(d.tasks.unshift({title:p,author:T.user.name,done:!1}),T)),x.target.parentElement.parentElement.close(),a(0,s.value="",s)}const l=(d,x,p,T)=>{a(1,x[p].donePercentage=Math.round(d.tasks.filter(k=>k.done).length/d.tasks.length*100),t);const[S]=d.tasks.splice(d.tasks.findIndex(k=>k.done),1);d.tasks.push(S),Y.update(k=>k)},o=()=>s.focus();function r(d){Ge[d?"unshift":"push"](()=>{s=d,a(0,s)})}return[s,t,c,l,o,r,(d,x)=>c(d,x)]}class nt extends fe{constructor(e){super(),he(this,e,lt,tt,de,{})}}function st(n){let e,a,s,t,c;return a=new Xe({}),t=new nt({}),{c(){e=f("div"),$e(a.$$.fragment),s=I(),$e(t.$$.fragment),this.h()},l(l){e=h(l,"DIV",{class:!0});var o=D(e);De(a.$$.fragment,o),s=y(o),De(t.$$.fragment,o),o.forEach(g),this.h()},h(){u(e,"class","space-y-6")},m(l,o){W(l,e,o),Ie(a,e,null),i(e,s),Ie(t,e,null),c=!0},i(l){c||(V(a.$$.fragment,l),V(t.$$.fragment,l),c=!0)},o(l){H(a.$$.fragment,l),H(t.$$.fragment,l),c=!1},d(l){l&&g(e),ye(a),ye(t)}}}function at(n){let e,a='<span class="loading loading-spinner loading-sm ease-linear"></span>';return{c(){e=f("div"),e.innerHTML=a,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-13rxzoy"&&(e.innerHTML=a),this.h()},h(){u(e,"class","grid place-items-center h-full")},m(s,t){W(s,e,t)},i:J,o:J,d(s){s&&g(e)}}}function ot(n){let e,a,s,t;const c=[at,st],l=[];function o(r,E){return r[0].loading?0:1}return e=o(n),a=l[e]=c[e](n),{c(){a.c(),s=Se()},l(r){a.l(r),s=Se()},m(r,E){l[e].m(r,E),W(r,s,E),t=!0},p(r,[E]){let d=e;e=o(r),e!==d&&(xe(),H(l[d],1,1,()=>{l[d]=null}),we(),a=l[e],a||(a=l[e]=c[e](r),a.c()),V(a,1),a.m(s.parentNode,s))},i(r){t||(V(a),t=!0)},o(r){H(a),t=!1},d(r){r&&g(s),l[e].d(r)}}}function rt(n,e,a){let s;Be(n,Y,o=>a(0,s=o)),ze(re);function t(){document.hidden?(console.log("PWA is not visible"),re()):console.log("PWA is visible")}function c(o){o.preventDefault(),o.returnValue="",console.log("User is about to leave the PWA"),re()}function l(o){console.log("Page is being hidden"),re()}return Qe(()=>(document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",c),window.addEventListener("pagehide",l),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",c),window.removeEventListener("pagehide",l)})),[s]}class dt extends fe{constructor(e){super(),he(this,e,rt,ot,de,{})}}export{dt as component};
