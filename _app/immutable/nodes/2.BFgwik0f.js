import{s as oe,e as g,t as A,c as p,b as E,d as O,f,p as u,i as j,h as i,j as K,n as q,k as Se,a as y,g as I,O as le,P as _e,A as Re,Q as Ue,R as Ae,S as se,l as Me,T as Ne,o as je}from"../chunks/scheduler.Dult4g_V.js";import{S as re,i as ie,a as T,g as De,c as ye,t as x,b as be,d as ke,m as $e,e as Ee}from"../chunks/index.bZ5aG_wg.js";import{c as J,f as ne}from"../chunks/stores.PLbXrk1E.js";function ae(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Fe(s){let e,o,a=s[0].user.name+"",t,c;return{c(){e=g("div"),o=A("Hallo "),t=A(a),c=A(" ðŸ«¶"),this.h()},l(l){e=p(l,"DIV",{class:!0});var n=E(e);o=O(n,"Hallo "),t=O(n,a),c=O(n," ðŸ«¶"),n.forEach(f),this.h()},h(){u(e,"class","w-full rounded-full align-middle text-center p-1 bg-gradient-to-r from-primary to-[#CBDDD9]")},m(l,n){j(l,e,n),i(e,o),i(e,t),i(e,c)},p(l,[n]){n&1&&a!==(a=l[0].user.name+"")&&K(t,a)},i:q,o:q,d(l){l&&f(e)}}}function We(s,e,o){let a;return Se(s,J,t=>o(0,a=t)),[a]}class Ge extends re{constructor(e){super(),ie(this,e,We,Fe,oe,{})}}function qe(s){let e,o=s[0].title+"",a,t,c,l,n=s[0].author+"",r,v,$,P,d,C,F;return{c(){e=g("div"),a=A(o),t=y(),c=g("div"),l=g("div"),r=A(n),v=y(),$=g("i"),P=y(),d=g("input"),this.h()},l(D){e=p(D,"DIV",{class:!0});var k=E(e);a=O(k,o),t=I(k),c=p(k,"DIV",{class:!0});var w=E(c);l=p(w,"DIV",{class:!0});var V=E(l);r=O(V,n),v=I(V),$=p(V,"I",{class:!0}),E($).forEach(f),V.forEach(f),P=I(w),d=p(w,"INPUT",{type:!0,class:!0}),w.forEach(f),k.forEach(f),this.h()},h(){u($,"class","fa-solid fa-user"),le($,"text-gray-400",s[0].done),u(l,"class","badge badge-primary flex items-center gap-2"),u(d,"type","checkbox"),u(d,"class","checkbox checkbox-xs checkbox-primary"),u(c,"class","flex items-center gap-2"),u(e,"class","flex justify-between items-center"),le(e,"font-thin",s[0].done)},m(D,k){j(D,e,k),i(e,a),i(e,t),i(e,c),i(c,l),i(l,r),i(l,v),i(l,$),i(c,P),i(c,d),d.checked=s[0].done,C||(F=[_e(d,"change",s[2]),_e(d,"change",s[3])],C=!0)},p(D,[k]){k&1&&o!==(o=D[0].title+"")&&K(a,o),k&1&&n!==(n=D[0].author+"")&&K(r,n),k&1&&le($,"text-gray-400",D[0].done),k&1&&(d.checked=D[0].done),k&1&&le(e,"font-thin",D[0].done)},i:q,o:q,d(D){D&&f(e),C=!1,Re(F)}}}function ze(s,e,o){let{task:a}=e;const t=Ue();function c(){a.done=this.checked,o(0,a)}const l=()=>t("statusChange");return s.$$set=n=>{"task"in n&&o(0,a=n.task)},[a,t,c,l]}class Qe extends re{constructor(e){super(),ie(this,e,ze,qe,oe,{task:0})}}function Pe(s,e,o){const a=s.slice();return a[4]=e[o],a[5]=e,a[6]=o,a}function Ce(s,e,o){const a=s.slice();return a[7]=e[o],a}function He(s){let e,o;function a(...t){return s[2](s[4],s[5],s[6],...t)}return e=new Qe({props:{task:s[7]}}),e.$on("statusChange",a),{c(){be(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,c){$e(e,t,c),o=!0},p(t,c){s=t;const l={};c&1&&(l.task=s[7]),e.$set(l)},i(t){o||(T(e.$$.fragment,t),o=!0)},o(t){x(e.$$.fragment,t),o=!1},d(t){Ee(e,t)}}}function xe(s){let e,o,a,t,c=s[4].title+"",l,n,r,v,$,P,d,C,F,D,k,w,V,X,ce,L,M,B,Ie='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>',ue,R,de,z=s[4].title+"",Y,fe,U,we='<input type="text" placeholder="Task ..." class="input w-full py-4 my-3 focus:outline-none"/>',he,S,Te="<button></button>",Z,me,H,ge,Ve,N=ae(s[4].tasks),_=[];for(let b=0;b<N.length;b+=1)_[b]=He(Ce(s,N,b));const Oe=b=>x(_[b],1,1,()=>{_[b]=null});function Be(...b){return s[3](s[4],...b)}return{c(){e=g("div"),o=g("input"),a=y(),t=g("div"),l=A(c),n=y(),r=g("div"),v=g("progress"),P=y(),d=g("div"),C=g("div"),F=y();for(let b=0;b<_.length;b+=1)_[b].c();D=y(),k=g("div"),w=g("button"),V=g("i"),ce=y(),L=g("dialog"),M=g("div"),B=g("form"),B.innerHTML=Ie,ue=y(),R=g("h3"),de=A("Add task to "),Y=A(z),fe=y(),U=g("form"),U.innerHTML=we,he=y(),S=g("form"),S.innerHTML=Te,me=y(),this.h()},l(b){e=p(b,"DIV",{class:!0});var h=E(e);o=p(h,"INPUT",{type:!0,name:!0}),a=I(h),t=p(h,"DIV",{class:!0});var m=E(t);l=O(m,c),n=I(m),r=p(m,"DIV",{class:!0});var Q=E(r);v=p(Q,"PROGRESS",{class:!0,max:!0}),E(v).forEach(f),Q.forEach(f),m.forEach(f),P=I(h),d=p(h,"DIV",{class:!0});var W=E(d);C=p(W,"DIV",{class:!0}),E(C).forEach(f),F=I(W);for(let ve=0;ve<_.length;ve+=1)_[ve].l(W);D=I(W),k=p(W,"DIV",{class:!0});var ee=E(k);w=p(ee,"BUTTON",{class:!0,onclick:!0});var Le=E(w);V=p(Le,"I",{class:!0}),E(V).forEach(f),Le.forEach(f),ce=I(ee),L=p(ee,"DIALOG",{id:!0,class:!0});var te=E(L);M=p(te,"DIV",{class:!0});var G=E(M);B=p(G,"FORM",{method:!0,"data-svelte-h":!0}),se(B)!=="svelte-1y32dtx"&&(B.innerHTML=Ie),ue=I(G),R=p(G,"H3",{class:!0});var pe=E(R);de=O(pe,"Add task to "),Y=O(pe,z),pe.forEach(f),fe=I(G),U=p(G,"FORM",{"data-svelte-h":!0}),se(U)!=="svelte-1ovwirs"&&(U.innerHTML=we),G.forEach(f),he=I(te),S=p(te,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),se(S)!=="svelte-aas4ya"&&(S.innerHTML=Te),te.forEach(f),ee.forEach(f),W.forEach(f),me=I(h),h.forEach(f),this.h()},h(){u(o,"type","radio"),u(o,"name","taskGroups"),u(v,"class","progress progress-accent"),v.value=$=s[4].donePercentage,u(v,"max","100"),u(r,"class","basis-1/4 flex-shrink-0"),u(t,"class","collapse-title font-light text-xl flex gap-2 justify-between items-center pr-[1rem] truncate"),u(C,"class","divider -mt-0.5"),u(V,"class","fa-solid fa-plus"),u(w,"class","btn btn-sm btn-circle btn-primary"),u(w,"onclick",X="modal_"+s[4].title.replace(/ /g,"_")+".showModal()"),u(B,"method","dialog"),u(R,"class","font-bold text-lg"),u(M,"class","modal-box"),u(S,"method","dialog"),u(S,"class","modal-backdrop"),u(L,"id",Z="modal_"+s[4].title.replace(/ /g,"_")),u(L,"class","modal"),u(k,"class","grid place-items-center pt-1"),u(d,"class","collapse-content space-y-2"),u(e,"class","collapse bg-base-100 drop-shadow-lg")},m(b,h){j(b,e,h),i(e,o),i(e,a),i(e,t),i(t,l),i(t,n),i(t,r),i(r,v),i(e,P),i(e,d),i(d,C),i(d,F);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(d,null);i(d,D),i(d,k),i(k,w),i(w,V),i(k,ce),i(k,L),i(L,M),i(M,B),i(M,ue),i(M,R),i(R,de),i(R,Y),i(M,fe),i(M,U),i(L,he),i(L,S),i(e,me),H=!0,ge||(Ve=_e(U,"submit",Be),ge=!0)},p(b,h){if(s=b,(!H||h&1)&&c!==(c=s[4].title+"")&&K(l,c),(!H||h&1&&$!==($=s[4].donePercentage))&&(v.value=$),h&1){N=ae(s[4].tasks);let m;for(m=0;m<N.length;m+=1){const Q=Ce(s,N,m);_[m]?(_[m].p(Q,h),T(_[m],1)):(_[m]=He(Q),_[m].c(),T(_[m],1),_[m].m(d,D))}for(De(),m=N.length;m<_.length;m+=1)Oe(m);ye()}(!H||h&1&&X!==(X="modal_"+s[4].title.replace(/ /g,"_")+".showModal()"))&&u(w,"onclick",X),(!H||h&1)&&z!==(z=s[4].title+"")&&K(Y,z),(!H||h&1&&Z!==(Z="modal_"+s[4].title.replace(/ /g,"_")))&&u(L,"id",Z)},i(b){if(!H){for(let h=0;h<N.length;h+=1)T(_[h]);H=!0}},o(b){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)x(_[h]);H=!1},d(b){b&&f(e),Ae(_,b),ge=!1,Ve()}}}function Je(s){let e,o,a=ae(s[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=xe(Pe(s,a,l));const c=l=>x(t[l],1,1,()=>{t[l]=null});return{c(){e=g("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=p(l,"DIV",{class:!0});var n=E(e);for(let r=0;r<t.length;r+=1)t[r].l(n);n.forEach(f),this.h()},h(){u(e,"class","flex flex-col gap-1.5")},m(l,n){j(l,e,n);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);o=!0},p(l,[n]){if(n&3){a=ae(l[0]);let r;for(r=0;r<a.length;r+=1){const v=Pe(l,a,r);t[r]?(t[r].p(v,n),T(t[r],1)):(t[r]=xe(v),t[r].c(),T(t[r],1),t[r].m(e,null))}for(De(),r=a.length;r<t.length;r+=1)c(r);ye()}},i(l){if(!o){for(let n=0;n<a.length;n+=1)T(t[n]);o=!0}},o(l){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)x(t[n]);o=!1},d(l){l&&f(e),Ae(t,l)}}}function Ke(s,e,o){let a=[];J.subscribe(n=>{o(0,a=n.data.taskGroups)});function t(n,r){const v=r.target.children[0].value;J.update($=>(n.tasks.unshift({title:v,author:$.user.name,done:!1}),$)),r.target.parentElement.parentElement.close()}return[a,t,(n,r,v,$)=>{o(0,r[v].donePercentage=Math.round(n.tasks.filter(d=>d.done).length/n.tasks.length*100),a);const[P]=n.tasks.splice(n.tasks.findIndex(d=>d.done),1);n.tasks.push(P),J.update(d=>d)},(n,r)=>t(n,r)]}class Xe extends re{constructor(e){super(),ie(this,e,Ke,Je,oe,{})}}function Ye(s){let e,o,a,t,c;return o=new Ge({}),t=new Xe({}),{c(){e=g("div"),be(o.$$.fragment),a=y(),be(t.$$.fragment),this.h()},l(l){e=p(l,"DIV",{class:!0});var n=E(e);ke(o.$$.fragment,n),a=I(n),ke(t.$$.fragment,n),n.forEach(f),this.h()},h(){u(e,"class","space-y-6")},m(l,n){j(l,e,n),$e(o,e,null),i(e,a),$e(t,e,null),c=!0},i(l){c||(T(o.$$.fragment,l),T(t.$$.fragment,l),c=!0)},o(l){x(o.$$.fragment,l),x(t.$$.fragment,l),c=!1},d(l){l&&f(e),Ee(o),Ee(t)}}}function Ze(s){let e,o='<span class="loading loading-spinner loading-sm ease-linear"></span>';return{c(){e=g("div"),e.innerHTML=o,this.h()},l(a){e=p(a,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-13rxzoy"&&(e.innerHTML=o),this.h()},h(){u(e,"class","grid place-items-center h-full")},m(a,t){j(a,e,t)},i:q,o:q,d(a){a&&f(e)}}}function et(s){let e,o,a,t;const c=[Ze,Ye],l=[];function n(r,v){return r[0].loading?0:1}return e=n(s),o=l[e]=c[e](s),{c(){o.c(),a=Me()},l(r){o.l(r),a=Me()},m(r,v){l[e].m(r,v),j(r,a,v),t=!0},p(r,[v]){let $=e;e=n(r),e!==$&&(De(),x(l[$],1,1,()=>{l[$]=null}),ye(),o=l[e],o||(o=l[e]=c[e](r),o.c()),T(o,1),o.m(a.parentNode,a))},i(r){t||(T(o),t=!0)},o(r){x(o),t=!1},d(r){r&&f(a),l[e].d(r)}}}function tt(s,e,o){let a;Se(s,J,n=>o(0,a=n)),Ne(ne);function t(){document.hidden?(console.log("PWA is not visible"),ne()):console.log("PWA is visible")}function c(n){n.preventDefault(),n.returnValue="",console.log("User is about to leave the PWA"),ne()}function l(n){console.log("Page is being hidden"),ne()}return je(()=>(document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",c),window.addEventListener("pagehide",l),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",c),window.removeEventListener("pagehide",l)})),[a]}class at extends re{constructor(e){super(),ie(this,e,tt,et,oe,{})}}export{at as component};
