import{s as ce,e as f,t as U,c as h,b as E,d as j,f as g,p as u,i as N,h as i,j as Z,n as Q,k as Be,a as D,g as y,O as re,P as ke,A as Ne,Q as We,R as Re,S as X,l as Pe,T as qe,o as Ge}from"../chunks/scheduler.Dult4g_V.js";import{S as ue,i as de,a as w,g as ye,c as Ie,t as P,b as $e,d as Ee,m as xe,e as De}from"../chunks/index.bZ5aG_wg.js";import{c as Y,f as oe}from"../chunks/stores.PLbXrk1E.js";function ie(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ze(s){let e,r,a=s[0].user.name+"",t,c;return{c(){e=f("div"),r=U("Hallo "),t=U(a),c=U(" ðŸ«¶"),this.h()},l(l){e=h(l,"DIV",{class:!0});var n=E(e);r=j(n,"Hallo "),t=j(n,a),c=j(n," ðŸ«¶"),n.forEach(g),this.h()},h(){u(e,"class","w-full rounded-full align-middle text-center p-1 bg-gradient-to-r from-primary to-[#CBDDD9]")},m(l,n){N(l,e,n),i(e,r),i(e,t),i(e,c)},p(l,[n]){n&1&&a!==(a=l[0].user.name+"")&&Z(t,a)},i:Q,o:Q,d(l){l&&g(e)}}}function Qe(s,e,r){let a;return Be(s,Y,t=>r(0,a=t)),[a]}class Je extends ue{constructor(e){super(),de(this,e,Qe,ze,ce,{})}}function Ke(s){let e,r=s[0].title+"",a,t,c,l,n=s[0].author+"",o,v,$,L,d,M,W;return{c(){e=f("div"),a=U(r),t=D(),c=f("div"),l=f("div"),o=U(n),v=D(),$=f("i"),L=D(),d=f("input"),this.h()},l(x){e=h(x,"DIV",{class:!0});var k=E(e);a=j(k,r),t=y(k),c=h(k,"DIV",{class:!0});var I=E(c);l=h(I,"DIV",{class:!0});var T=E(l);o=j(T,n),v=y(T),$=h(T,"I",{class:!0}),E($).forEach(g),T.forEach(g),L=y(I),d=h(I,"INPUT",{type:!0,class:!0}),I.forEach(g),k.forEach(g),this.h()},h(){u($,"class","fa-solid fa-user"),re($,"text-gray-400",s[0].done),u(l,"class","badge badge-primary flex items-center gap-2"),u(d,"type","checkbox"),u(d,"class","checkbox checkbox-xs checkbox-primary"),u(c,"class","flex items-center gap-2"),u(e,"class","flex justify-between items-center"),re(e,"font-thin",s[0].done)},m(x,k){N(x,e,k),i(e,a),i(e,t),i(e,c),i(c,l),i(l,o),i(l,v),i(l,$),i(c,L),i(c,d),d.checked=s[0].done,M||(W=[ke(d,"change",s[2]),ke(d,"change",s[3])],M=!0)},p(x,[k]){k&1&&r!==(r=x[0].title+"")&&Z(a,r),k&1&&n!==(n=x[0].author+"")&&Z(o,n),k&1&&re($,"text-gray-400",x[0].done),k&1&&(d.checked=x[0].done),k&1&&re(e,"font-thin",x[0].done)},i:Q,o:Q,d(x){x&&g(e),M=!1,Ne(W)}}}function Xe(s,e,r){let{task:a}=e;const t=We();function c(){a.done=this.checked,r(0,a)}const l=()=>t("statusChange");return s.$$set=n=>{"task"in n&&r(0,a=n.task)},[a,t,c,l]}class Ye extends ue{constructor(e){super(),de(this,e,Xe,Ke,ce,{task:0})}}function Se(s,e,r){const a=s.slice();return a[4]=e[r],a[5]=e,a[6]=r,a}function Fe(s,e,r){const a=s.slice();return a[7]=e[r],a}function Oe(s){let e,r;function a(...t){return s[2](s[4],s[5],s[6],...t)}return e=new Ye({props:{task:s[7]}}),e.$on("statusChange",a),{c(){$e(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,c){xe(e,t,c),r=!0},p(t,c){s=t;const l={};c&1&&(l.task=s[7]),e.$set(l)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){P(e.$$.fragment,t),r=!1},d(t){De(e,t)}}}function Ae(s){let e,r,a,t,c=s[4].title+"",l,n,o,v,$,L,d,M,W,x,k,I,T,ee,fe,V,C,O,we='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>',he,S,q,J=s[4].title+"",te,ge,A,Te="...",me,B,Ve='<input type="text" placeholder="Task ..." class="input w-full py-4 my-3 focus:outline-none"/>',pe,F,Ce="<button></button>",le,ve,H,_e,Le,R=ie(s[4].tasks),_=[];for(let b=0;b<R.length;b+=1)_[b]=Oe(Fe(s,R,b));const Ue=b=>P(_[b],1,1,()=>{_[b]=null});function je(...b){return s[3](s[4],...b)}return{c(){e=f("div"),r=f("input"),a=D(),t=f("div"),l=U(c),n=D(),o=f("div"),v=f("progress"),L=D(),d=f("div"),M=f("div"),W=D();for(let b=0;b<_.length;b+=1)_[b].c();x=D(),k=f("div"),I=f("button"),T=f("i"),fe=D(),V=f("dialog"),C=f("div"),O=f("form"),O.innerHTML=we,he=D(),S=f("div"),q=f("h3"),te=U(J),ge=D(),A=f("h3"),A.textContent=Te,me=D(),B=f("form"),B.innerHTML=Ve,pe=D(),F=f("form"),F.innerHTML=Ce,ve=D(),this.h()},l(b){e=h(b,"DIV",{class:!0});var m=E(e);r=h(m,"INPUT",{type:!0,name:!0}),a=y(m),t=h(m,"DIV",{class:!0});var p=E(t);l=j(p,c),n=y(p),o=h(p,"DIV",{class:!0});var K=E(o);v=h(K,"PROGRESS",{class:!0,max:!0}),E(v).forEach(g),K.forEach(g),p.forEach(g),L=y(m),d=h(m,"DIV",{class:!0});var G=E(d);M=h(G,"DIV",{class:!0}),E(M).forEach(g),W=y(G);for(let be=0;be<_.length;be+=1)_[be].l(G);x=y(G),k=h(G,"DIV",{class:!0});var ne=E(k);I=h(ne,"BUTTON",{class:!0,onclick:!0});var Me=E(I);T=h(Me,"I",{class:!0}),E(T).forEach(g),Me.forEach(g),fe=y(ne),V=h(ne,"DIALOG",{id:!0,class:!0});var se=E(V);C=h(se,"DIV",{class:!0});var z=E(C);O=h(z,"FORM",{method:!0,"data-svelte-h":!0}),X(O)!=="svelte-1y32dtx"&&(O.innerHTML=we),he=y(z),S=h(z,"DIV",{class:!0});var ae=E(S);q=h(ae,"H3",{class:!0});var He=E(q);te=j(He,J),He.forEach(g),ge=y(ae),A=h(ae,"H3",{class:!0,"data-svelte-h":!0}),X(A)!=="svelte-1srqw7j"&&(A.textContent=Te),ae.forEach(g),me=y(z),B=h(z,"FORM",{"data-svelte-h":!0}),X(B)!=="svelte-1ovwirs"&&(B.innerHTML=Ve),z.forEach(g),pe=y(se),F=h(se,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),X(F)!=="svelte-aas4ya"&&(F.innerHTML=Ce),se.forEach(g),ne.forEach(g),G.forEach(g),ve=y(m),m.forEach(g),this.h()},h(){u(r,"type","radio"),u(r,"name","taskGroups"),u(v,"class","progress progress-accent"),v.value=$=s[4].donePercentage,u(v,"max","100"),u(o,"class","basis-1/4 flex-shrink-0"),u(t,"class","collapse-title font-light text-xl flex gap-2 justify-between items-center pr-[1rem] truncate"),u(M,"class","divider -mt-0.5"),u(T,"class","fa-solid fa-plus"),u(I,"class","btn btn-sm btn-circle btn-primary"),u(I,"onclick",ee="modal_"+s[4].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")+".showModal()"),u(O,"method","dialog"),u(q,"class","font-bold text-lg bg-primary rounded-lg px-2"),u(A,"class","font-bold text-lg"),u(S,"class","flex items-center gap-2"),u(C,"class","modal-box"),u(F,"method","dialog"),u(F,"class","modal-backdrop"),u(V,"id",le="modal_"+s[4].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")),u(V,"class","modal"),u(k,"class","grid place-items-center pt-1"),u(d,"class","collapse-content space-y-2"),u(e,"class","collapse bg-base-100 drop-shadow-lg")},m(b,m){N(b,e,m),i(e,r),i(e,a),i(e,t),i(t,l),i(t,n),i(t,o),i(o,v),i(e,L),i(e,d),i(d,M),i(d,W);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(d,null);i(d,x),i(d,k),i(k,I),i(I,T),i(k,fe),i(k,V),i(V,C),i(C,O),i(C,he),i(C,S),i(S,q),i(q,te),i(S,ge),i(S,A),i(C,me),i(C,B),i(V,pe),i(V,F),i(e,ve),H=!0,_e||(Le=ke(B,"submit",je),_e=!0)},p(b,m){if(s=b,(!H||m&1)&&c!==(c=s[4].title+"")&&Z(l,c),(!H||m&1&&$!==($=s[4].donePercentage))&&(v.value=$),m&1){R=ie(s[4].tasks);let p;for(p=0;p<R.length;p+=1){const K=Fe(s,R,p);_[p]?(_[p].p(K,m),w(_[p],1)):(_[p]=Oe(K),_[p].c(),w(_[p],1),_[p].m(d,x))}for(ye(),p=R.length;p<_.length;p+=1)Ue(p);Ie()}(!H||m&1&&ee!==(ee="modal_"+s[4].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")+".showModal()"))&&u(I,"onclick",ee),(!H||m&1)&&J!==(J=s[4].title+"")&&Z(te,J),(!H||m&1&&le!==(le="modal_"+s[4].title.replace(/[^\x00-\x7F]/g,"").replace(/ /g,"_")))&&u(V,"id",le)},i(b){if(!H){for(let m=0;m<R.length;m+=1)w(_[m]);H=!0}},o(b){_=_.filter(Boolean);for(let m=0;m<_.length;m+=1)P(_[m]);H=!1},d(b){b&&g(e),Re(_,b),_e=!1,Le()}}}function Ze(s){let e,r,a=ie(s[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=Ae(Se(s,a,l));const c=l=>P(t[l],1,1,()=>{t[l]=null});return{c(){e=f("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=h(l,"DIV",{class:!0});var n=E(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(g),this.h()},h(){u(e,"class","flex flex-col gap-1.5")},m(l,n){N(l,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);r=!0},p(l,[n]){if(n&3){a=ie(l[0]);let o;for(o=0;o<a.length;o+=1){const v=Se(l,a,o);t[o]?(t[o].p(v,n),w(t[o],1)):(t[o]=Ae(v),t[o].c(),w(t[o],1),t[o].m(e,null))}for(ye(),o=a.length;o<t.length;o+=1)c(o);Ie()}},i(l){if(!r){for(let n=0;n<a.length;n+=1)w(t[n]);r=!0}},o(l){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)P(t[n]);r=!1},d(l){l&&g(e),Re(t,l)}}}function et(s,e,r){let a=[];Y.subscribe(n=>{r(0,a=n.data.taskGroups)});function t(n,o){const v=o.target.children[0].value;Y.update($=>(n.tasks.unshift({title:v,author:$.user.name,done:!1}),$)),o.target.parentElement.parentElement.close()}return[a,t,(n,o,v,$)=>{r(0,o[v].donePercentage=Math.round(n.tasks.filter(d=>d.done).length/n.tasks.length*100),a);const[L]=n.tasks.splice(n.tasks.findIndex(d=>d.done),1);n.tasks.push(L),Y.update(d=>d)},(n,o)=>t(n,o)]}class tt extends ue{constructor(e){super(),de(this,e,et,Ze,ce,{})}}function lt(s){let e,r,a,t,c;return r=new Je({}),t=new tt({}),{c(){e=f("div"),$e(r.$$.fragment),a=D(),$e(t.$$.fragment),this.h()},l(l){e=h(l,"DIV",{class:!0});var n=E(e);Ee(r.$$.fragment,n),a=y(n),Ee(t.$$.fragment,n),n.forEach(g),this.h()},h(){u(e,"class","space-y-6")},m(l,n){N(l,e,n),xe(r,e,null),i(e,a),xe(t,e,null),c=!0},i(l){c||(w(r.$$.fragment,l),w(t.$$.fragment,l),c=!0)},o(l){P(r.$$.fragment,l),P(t.$$.fragment,l),c=!1},d(l){l&&g(e),De(r),De(t)}}}function nt(s){let e,r='<span class="loading loading-spinner loading-sm ease-linear"></span>';return{c(){e=f("div"),e.innerHTML=r,this.h()},l(a){e=h(a,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-13rxzoy"&&(e.innerHTML=r),this.h()},h(){u(e,"class","grid place-items-center h-full")},m(a,t){N(a,e,t)},i:Q,o:Q,d(a){a&&g(e)}}}function st(s){let e,r,a,t;const c=[nt,lt],l=[];function n(o,v){return o[0].loading?0:1}return e=n(s),r=l[e]=c[e](s),{c(){r.c(),a=Pe()},l(o){r.l(o),a=Pe()},m(o,v){l[e].m(o,v),N(o,a,v),t=!0},p(o,[v]){let $=e;e=n(o),e!==$&&(ye(),P(l[$],1,1,()=>{l[$]=null}),Ie(),r=l[e],r||(r=l[e]=c[e](o),r.c()),w(r,1),r.m(a.parentNode,a))},i(o){t||(w(r),t=!0)},o(o){P(r),t=!1},d(o){o&&g(a),l[e].d(o)}}}function at(s,e,r){let a;Be(s,Y,n=>r(0,a=n)),qe(oe);function t(){document.hidden?(console.log("PWA is not visible"),oe()):console.log("PWA is visible")}function c(n){n.preventDefault(),n.returnValue="",console.log("User is about to leave the PWA"),oe()}function l(n){console.log("Page is being hidden"),oe()}return Ge(()=>(document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",c),window.addEventListener("pagehide",l),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",c),window.removeEventListener("pagehide",l)})),[a]}class ct extends ue{constructor(e){super(),de(this,e,at,st,ce,{})}}export{ct as component};
